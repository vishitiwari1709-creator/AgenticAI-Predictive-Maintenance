/* ========== GLOBAL ========== */
:root{
    --bg:#f0f2f5; --card:#fff; --muted:#6c757d; --primary:#007bff; --success:#28a745; --warning:#ffc107; --danger:#dc3545;
    --shadow: 0 6px 20px rgba(0,0,0,0.12);
}
*{box-sizing:border-box}
body{font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; margin:0; background:var(--bg); color:#222;}
.container{padding:20px; max-width:1100px; margin: 18px auto 90px; transition: margin-bottom .2s;}
.container.with-chat{margin-bottom:260px;} /* leave space when chat open so content isn't obscured */
.card{background:var(--card); padding:18px; border-radius:12px; box-shadow:var(--shadow); margin-bottom:18px;}
h1,h2,h3{margin:8px 0;}
.action-button{background:var(--primary); color:#fff; border:none; padding:10px 14px; border-radius:8px; font-weight:600; cursor:pointer; transition:transform .12s, background .15s;}
.action-button:hover{transform:translateY(-2px)}
a{color:var(--danger)}

/* ========== HEADER VIEWS ========== */
.header{padding:14px 20px; display:flex; align-items:center; justify-content:space-between; color:#fff;}
#owner-view .header{background:var(--primary)}
#technician-view .header{background:var(--warning); color:#222}
#manager-view .header{background:var(--danger)}

/* ========== LAYOUT GRIDS ========== */
.action-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); gap:12px}
.kpi-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:12px; text-align:center}
.status-card{display:flex; gap:16px; align-items:center; border-left:6px solid var(--success); padding-left:12px}
.compliance-list{list-style:none;padding:0;margin:0}
.compliance-item{display:flex;justify-content:space-between; padding:10px 0; border-bottom:1px solid #eee;}

/* ========== LOGIN VIEW ========== */
#login-view{height:100vh; display:flex; align-items:center; justify-content:center; background: linear-gradient(135deg,#163a66,#1e3a5f); color:#fff; padding:20px;}
.login-card{background:#fff; color:#222; max-width:900px; width:100%; border-radius:14px; padding:28px; box-shadow:0 18px 50px rgba(0,0,0,0.4);}
.role-selection{display:flex; gap:20px; justify-content:center; flex-wrap:wrap; margin-top:18px;}
.role-card{width:230px; padding:18px; border-radius:10px; cursor:pointer; background:#f8f9fa; border:2px solid #e6e6e6; text-align:center;}
.role-card:hover{transform:translateY(-6px); border-color:var(--primary); box-shadow:0 12px 28px rgba(0,0,0,0.12)}
.login-form input, .login-form select {width:100%; padding:10px; margin-bottom:12px; border-radius:8px; border:1px solid #ccc;}

/* ========== MODALS ========== */
.modal{display:none; position:fixed; inset:0; background:rgba(0,0,0,0.45); z-index:1200; align-items:center; justify-content:center;}
.modal .modal-content{width:90%; max-width:520px; background:#fff; padding:18px; border-radius:12px; box-shadow:0 20px 60px rgba(0,0,0,0.4); position:relative;}
.close-btn{position:absolute; right:12px; top:10px; background:none; border:none; font-size:20px; cursor:pointer;}

/* ========== CHATBOX (IMPROVED) ========== */
#chatbox-container{position:fixed; right:15px; bottom:15px; width:320px; height:420px; border-radius:12px; background:#fff; box-shadow:0 20px 60px rgba(0,0,0,0.25); display:none; z-index:1300; overflow:hidden; display:flex; flex-direction:column;}
#chatbox-container.minimized{height:52px}
#chat-header{background:var(--success); color:#fff; padding:12px 14px; display:flex; justify-content:space-between; align-items:center; cursor:default;}
#chatbox-toggle{background:none;border:none;color:#fff;font-size:16px;cursor:pointer;padding:6px}
#chat-messages{flex:1; padding:12px; overflow-y:auto; background:#e9f5f1;}
#chat-input-area{display:flex; gap:8px; padding:10px; border-top:1px solid #e4e4e4; align-items:center}
#chat-input{flex:1;padding:10px;border-radius:8px;border:1px solid #ccc}
.message-ai{background:#d1ecf1; padding:10px;border-radius:8px;margin-bottom:10px; display:inline-block; max-width:85%;}
.message-user{background:#f1f3f5;padding:8px;border-radius:8px;margin-bottom:10px; display:inline-block; float:right; max-width:85%;}
.chat-controls{display:flex; gap:8px; align-items:center}
#mic-btn{background:transparent;border:2px solid #28a745;color:#28a745;padding:8px;border-radius:8px;cursor:pointer}

/* responsiveness */
@media (max-width:780px){ #chatbox-container{width:280px;height:360px; right:10px; bottom:10px} .container{padding:12px}}
